---
- name: "D1D2 Set up Bazel Build Environment"
  block:
    - name: "Install and upgrade Bazel"
      shell: |
        brew install bazelisk;
      args:
        chdir: "{{ provisioner.inventory.group_vars.all.Jannah.global.ansible.working_dir }}"
      tags:
        - "d1d2-bazel-dev-env-setup"
        - "d1d2-bazel-install"
        - "d1d2-operator"
    - name: "Confirm bazel"
      shell: |
        bazel --version
      args:
        chdir: "{{ provisioner.inventory.group_vars.all.Jannah.global.ansible.working_dir }}"
      tags:
        - "d1d2-bazel-dev-env-setup"
        - "d1d2-bazel-install"
        - "d1d2-operator"
  rescue:
    - name: "D1D2 Set up Bazel Development Environment Exception"
      ansible.builtin.debug:
        msg: 'D1D2 Set up Bazel Development Environment Exception'
      register: debug_d1d2_bazel_install
  ignore_errors: false
